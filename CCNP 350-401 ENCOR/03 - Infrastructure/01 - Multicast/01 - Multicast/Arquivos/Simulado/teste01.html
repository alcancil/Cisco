<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simulado Multicast</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 flex items-center justify-center min-h-screen p-6">

  <div class="w-full max-w-2xl bg-white shadow-lg rounded-xl p-6">
    <!-- Tela inicial -->
    <div id="start-screen" class="text-center">
      <h1 class="text-2xl font-bold mb-4">Simulado Multicast</h1>
      <p class="mb-6 text-slate-600">Este simulado cont√©m 10 quest√µes sobre Multicast. Voc√™ ter√° 10 minutos para concluir.</p>
      <button onclick="startQuiz()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Iniciar</button>
    </div>

    <!-- Tela do Quiz -->
    <div id="quiz-screen" class="hidden">
      <div class="flex justify-between items-center mb-4">
        <span id="timer" class="font-semibold text-slate-700">Tempo: 10:00</span>
        <span id="question-number" class="font-semibold text-slate-700">1</span>
      </div>

      <!-- Barra de Progresso -->
      <div class="w-full bg-slate-200 rounded-full h-3 mb-6">
        <div id="progress-bar" class="bg-blue-600 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
      </div>

      <h2 id="question-text" class="text-lg font-semibold mb-4"></h2>
      <div id="options" class="space-y-3"></div>
      <button id="next-btn" onclick="nextQuestion()" disabled class="mt-6 px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Pr√≥xima Quest√£o</button>
    </div>

    <!-- Tela de Resultados -->
    <div id="result-screen" class="hidden text-center">
      <h2 class="text-2xl font-bold mb-4">Resultado</h2>
      <p id="score" class="mb-4 text-lg"></p>
      <div id="review" class="text-left space-y-4"></div>
      <button onclick="location.reload()" class="mt-6 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700">Refazer Simulado</button>
    </div>
  </div>

  <script>
    const quizData = [
      { 
        question: "Qual endere√ßo multicast √© reservado para todos os roteadores IPv4?",
        options: ["224.0.0.1", "224.0.0.2", "224.0.0.5", "239.255.255.250"],
        answer: "224.0.0.2",
        explanation: "O endere√ßo 224.0.0.2 √© reservado para todos os roteadores IPv4 no segmento local."
      },
      { 
        question: "Qual protocolo evita flooding de tr√°fego multicast em switches?",
        options: ["PIM", "IGMP Snooping", "OSPF", "BGP"],
        answer: "IGMP Snooping",
        explanation: "O IGMP Snooping permite que switches encaminhem tr√°fego multicast apenas para portas com membros do grupo."
      },
      { 
        question: "Em IPv6, qual √© o endere√ßo multicast para todos os n√≥s?",
        options: ["FF02::1", "FF02::2", "FF05::2", "FF01::3"],
        answer: "FF02::1",
        explanation: "FF02::1 √© o endere√ßo multicast reservado para todos os n√≥s IPv6 no link-local."
      },
      { 
        question: "O SSM (232.0.0.0/8) depende de qual vers√£o IGMP?",
        options: ["IGMPv1", "IGMPv2", "IGMPv3", "Qualquer"],
        answer: "IGMPv3",
        explanation: "O Source-Specific Multicast requer IGMPv3, pois ele permite que os hosts especifiquem a fonte (S,G)."
      },


      { 
        question: "Qual faixa de endere√ßamento IPv4 √© Classe D para Multicast?",
        options: ["192.0.0.0 a 223.255.255.255","224.0.0.0 a 239.255.255.255","128.0.0.0 a 191.255.255.255","240.0.0.0 a 247.255.255.255"],
        answer: "224.0.0.0 a 239.255.255.255", 
        explanation: " "
      },
      { 
        question: "No IPv6, qual prefixo identifica Multicast?",
        options: ["FE80::/10","2000::/3","FC00::/7","FF00::/8"],
        answer: "FF00::/8" 
      },
      { 
        question: "Qual protocolo evita flooding de tr√°fego multicast em switches?",
        options: ["PIM","IGMP Snooping","OSPF","BGP"],
        answer: "IGMP Snooping" 
      },
      { 
        question: "Qual endere√ßo multicast bem-conhecido √© usado pelo PIM?",
        options: ["224.0.0.5","224.0.0.10","224.0.0.13","224.0.0.2"],
        answer: "224.0.0.13" 
      },
      { 
        question: "Os endere√ßos 239.0.0.0/8 s√£o?",
        options: ["Rote√°veis na Internet","Reservados para uso interno","Exclusivos do NTP","Obrigat√≥rios entre AS"],
        answer: "Reservados para uso interno" 
      },
      { 
        question: "Qual problema do mapeamento IPv4 Multicast para MAC foi resolvido no IPv6?",
        options: ["Necessidade de ARP","Lentid√£o na convers√£o","Sobreposi√ß√£o de IPs em MACs","Limite de 256 endere√ßos"],
        answer: "Sobreposi√ß√£o de IPs em MACs" 
      },
      { 
        question: "O SSM (232.0.0.0/8) depende de qual vers√£o IGMP?",
        options: ["IGMPv1","IGMPv2","IGMPv3","Qualquer"],
        answer: "IGMPv3" 
      },
      { 
        question: "Qual valor de 'scope' no IPv6 para Link-Local?",
        options: ["1 (Interface)","2 (Link-Local)","5 (Site)","E (Global)"],
        answer: "2 (Link-Local)" 
      },
      { 
        question: "Qual prefixo MAC √© usado para Multicast IPv6?",
        options: ["01:00:5E","FF:FF:FF","33:33:00","33:33"],
        answer: "33:33" 
      },
      { 
        question: "O que √© GLOP Addressing?",
        options: ["Criptografia","Mapeamento de ASN para Multicast","Balanceamento de carga","Limitar tr√°fego a VLAN"],
        answer: "Mapeamento de ASN para Multicast" 
      },
      // üëâ Adicione mais quest√µes aqui
    ];

    // Randomiza ordem das quest√µes
    quizData.sort(() => Math.random() - 0.5);

    let currentQuestionIndex = 0;
    let score = 0;
    let timer;
    const totalTime = 10 * 60;

    const startScreen = document.getElementById("start-screen");
    const quizScreen = document.getElementById("quiz-screen");
    const resultScreen = document.getElementById("result-screen");
    const questionTextEl = document.getElementById("question-text");
    const optionsContainer = document.getElementById("options");
    const nextBtn = document.getElementById("next-btn");
    const scoreEl = document.getElementById("score");
    const questionNumberEl = document.getElementById("question-number");
    const timerEl = document.getElementById("timer");
    const reviewEl = document.getElementById("review");

    function startQuiz() {
      startScreen.classList.add("hidden");
      quizScreen.classList.remove("hidden");
      showQuestion();
      startTimer();
    }

    function startTimer() {
      let timeLeft = totalTime;
      timer = setInterval(() => {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        timerEl.textContent = `Tempo: ${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
        if (timeLeft-- <= 0) {
          clearInterval(timer);
          showResults();
        }
      }, 1000);
    }

    function updateProgressBar() {
      const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
      document.getElementById('progress-bar').style.width = `${progress}%`;
    }

    function showQuestion() {
      const q = quizData[currentQuestionIndex];
      questionNumberEl.textContent = `${currentQuestionIndex+1}/${quizData.length}`;
      questionTextEl.textContent = q.question;
      optionsContainer.innerHTML = '';

      const shuffled = [...q.options].sort(() => Math.random() - 0.5);
      shuffled.forEach(opt => {
        const b = document.createElement("button");
        b.textContent = opt;
        b.classList.add("quiz-option","w-full","text-left","p-4","border-2","rounded-lg","transition-colors","duration-200","hover:bg-blue-100","hover:border-blue-400");
        b.onclick = () => selectOption(b, opt);
        optionsContainer.appendChild(b);
      });

      nextBtn.textContent = currentQuestionIndex === quizData.length - 1 ? "Ver Resultados" : "Pr√≥xima Quest√£o";
      nextBtn.disabled = true;

      updateProgressBar();
    }

    function selectOption(button, selected) {
      const q = quizData[currentQuestionIndex];
      const buttons = document.querySelectorAll(".quiz-option");

      buttons.forEach(b => b.disabled = true);

      if (selected === q.answer) {
        button.classList.add("bg-green-200","border-green-600");
        score++;
      } else {
        button.classList.add("bg-red-200","border-red-600");
        buttons.forEach(b => {
          if (b.textContent === q.answer) b.classList.add("bg-green-200","border-green-600");
        });
      }

      nextBtn.disabled = false;
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex < quizData.length) {
        showQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      clearInterval(timer);
      quizScreen.classList.add("hidden");
      resultScreen.classList.remove("hidden");

      scoreEl.textContent = `Voc√™ acertou ${score} de ${quizData.length} quest√µes.`;

      reviewEl.innerHTML = quizData.map((q, i) => {
        return `
          <div class="p-4 border rounded-lg">
            <p class="font-semibold">Q${i+1}: ${q.question}</p>
            <p class="text-sm">Resposta correta: <span class="font-semibold">${q.answer}</span></p>
            <p class="text-slate-600 text-sm mt-1">${q.explanation}</p>
          </div>
        `;
      }).join('');
    }
  </script>
</body>
</html>
